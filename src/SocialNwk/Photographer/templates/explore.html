{% extends "base.html" %}
{% load staticfiles %}
{% block title %}EXPLORE{% endblock %}
{% block head_script %}
    <link href="{% static 'explore_main.css' %}" rel="stylesheet" type="text/css">
{% endblock %}
{% block content %}
    <div id="container">
        
    <div id="main" role="main">

      <ul id="tiles">
        <!-- Place content loaded photo from the photo API -->
      </ul>

    </div>

    </div>
    <div id="loadMore"><a>Load More</a></div>
{% endblock %}

{% block foot_script %}
<!--<script src="{% static 'tuolei.js' %}"></script>-->
<script>
  photo_list_url = "{% url 'photo:photo-list' %}";
  photo_page_url = "{% url 'photo:photo_page' 1 %}";
  user_url = "{% url 'photo:user_page' 1 %}";
  user_url = user_url.substring(0, user_url.length - 2);
  photo_page_url = photo_page_url.substring(0, photo_page_url.length - 2);
  
  //define load handler
  var handler = null,
      page = 1,
      isLoading = false,
      finishLoad = false;

  // Prepare layout options.
  var options = {
    autoResize: true, // This will auto-update the layout when the browser window is resized.
    container: $('#tiles'), // Optional, used for some extra CSS styling
    offset: 2, // Optional, the distance between grid items
    itemWidth: 210 // Optional, the width of a grid item
  };

  $(document).bind('scroll', onScroll);

  $(document).ready(function(){
        loadData();
  });


  /**
  * When scrolled all the way to the bottom, add more tiles.
  */
  function onScroll(event) {
    // Only check when we're not still waiting for data.
    if(!isLoading && !finishLoad) {
      // Check if we're within 100 pixels of the bottom edge of the broser window.
      var closeToBottom = ($(window).scrollTop() + $(window).height() > $(document).height() - 100);
      if(closeToBottom) {
        loadData();
      }
    }
  };

</script>

<!-- Include the imagesLoaded plug-in -->
<script src="{% static 'jquery.imagesloaded.min.js' %}"></script>

<!-- Include the plug-in -->
<script src="{% static 'jquery.wookmark.min.js' %}"></script>

<!-- Include the photo_load.js -->
<script src="{% static 'photo_load.js' %}"></script>

{% endblock %}